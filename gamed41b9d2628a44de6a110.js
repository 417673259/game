!function(e){var t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s=0)}({0:function(e,t,n){"use strict";n.r(t);n(5);var o={start(e){this.box=document.querySelector("#gameBox"),this.createModel(),e&&this.render(e)},render(e){e.forEach(e=>{this.createPieces(e.position,e.color)})},createModel(){const e=document.createDocumentFragment();for(let t=0;t<196;t+=1){const t=document.createElement("span");t.className="model",e.appendChild(t)}this.box.appendChild(e)},createPieces(e,t){const n=document.createElement("i");n.className=`pieces-${t}`,n.style.top=`${36*e.yn-10}px`,n.style.left=`${36*e.xn-10}px`,n.setAttribute("data-id",`${e.xn}${e.yn}`),this.box.appendChild(n)},backPieces(e){this.box.removeChild(this.box.querySelector(`[data-id='${e.id}']`))},reset(){this.box.querySelectorAll("i").forEach(e=>{this.box.removeChild(e)})}};var s={start(e){this.createCanvas(),this.drawModel(),e&&this.render(e)},render(e){e.forEach(e=>{this.createPieces(e.position,e.color)})},createCanvas(){const e=document.querySelector("#gameBox"),t=document.createElement("canvas");t.width=506,t.height=506,e.appendChild(t),e.classList.add("canvas"),this.canvas=t,this.context=t.getContext("2d")},drawModel(){const{context:e}=this;e.lineWidth="1px",e.strokeStyle="black",e.beginPath();for(let t=0;t<15;t+=1)e.moveTo(36*t+.5,.5),e.lineTo(36*t+.5,504.5),e.stroke(),e.beginPath();for(let t=0;t<15;t+=1)e.moveTo(.5,36*t+.5),e.lineTo(504.5,36*t+.5),e.stroke(),e.beginPath()},createPieces(e,t){const n=36*e.yn,o=36*e.xn,{context:s}=this;s.beginPath(),s.arc(o,n,10,0,2*Math.PI),s.fillStyle=t,s.fill()},backPieces(e,t){this.reset(),t.forEach(e=>{this.createPieces(e.position,e.color)})},reset(){this.context.clearRect(0,0,506,506),this.drawModel()}};let r=[],i={},c=[],a=o;const l=document.querySelector(".show-btn");({start(){this.eventBind(),a.start()},eventBind(){const e=document.querySelector("#gameBox");this.gameBox=e,e.addEventListener("click",e=>{this.someOneWin||this.computedPosition({x:e.offsetX-10,y:e.offsetY-10})},!1),document.querySelector("#backBtn").addEventListener("click",()=>{this.backPieces()}),document.querySelector("#reBackBtn").addEventListener("click",()=>{this.reBackPieces()}),document.querySelector(".reset-btn").addEventListener("click",()=>{this.someOneWin=!1,this.reset()});const t=document.querySelector("#domBtn"),n=document.querySelector("#canvasBtn");t.addEventListener("click",()=>{this.boxReset(),e.classList.remove("canvas"),a=o,t.classList.add("active"),n.classList.remove("active"),a.start(r)}),n.addEventListener("click",()=>{this.boxReset(),e.classList.add("canvas"),a=s,n.classList.add("active"),t.classList.remove("active"),a.start(r)})},computedPosition(e){const t=Math.round(e.x/36),n=Math.round(e.y/36);36*t-10<e.x&&e.x<36*t+10&&36*n-10<e.y&&e.y<36*n+10&&this.savePieces({xn:t,yn:n})},savePieces(e){const t=""+e.xn+e.yn,n=r.length%2==0?"black":"white";i.hasOwnProperty(t)||(i[t]={id:t,color:n},r.push({id:t,color:n,position:e}),this.showText(n),this.createPieces(e,n),this.isWin(e,n))},showText(e){l.innerText="black"===e?"请白方落子":"请黑方落子"},isWin(e,t){(this.slopeRight(e,t)||this.slopeLeft(e,t)||this.verticalWin(e,t)||this.horizontalWin(e,t))&&(alert(`恭喜${"black"===t?"黑方":"白方"}获胜`),this.someOneWin=!0)},verticalWin(e,t){let n=0,o=e.yn-1,s=e.yn+1;for(;;){if(n>=4)return!0;if(o<0&&s>14)return!1;const r=""+e.xn+o,c=""+e.xn+s;o>=0&&i.hasOwnProperty(r)&&i[r].color===t?(n+=1,o-=1):o=-9999,s<=14&&i.hasOwnProperty(c)&&i[c].color===t?(n+=1,s+=1):s=9999}},horizontalWin(e,t){let n=0,o=e.xn-1,s=e.xn+1;for(;;){if(n>=4)return!0;if(o<0&&s>14)return!1;const r=""+o+e.yn,c=""+s+e.yn;o>=0&&i.hasOwnProperty(r)&&i[r].color===t?(n+=1,o-=1):o=-9999,s<=14&&i.hasOwnProperty(c)&&i[c].color===t?(n+=1,s+=1):s=9999}},slopeLeft(e,t){let n=0,o=e.xn+1,s=e.yn-1,r=e.xn-1,c=e.yn+1;for(;;){if(n>=4)return!0;if((s<0||o>14)&&(r<0||c>14))return!1;const e=""+o+s,a=""+r+c;s>=0&&o<=14&&i.hasOwnProperty(e)&&i[e].color===t?(n+=1,o+=1,s-=1):o=9999,r>=0&&c<=14&&i.hasOwnProperty(a)&&i[a].color===t?(n+=1,r-=1,c+=1):r=-9999}},slopeRight(e,t){let n=0,o=e.xn-1,s=e.yn-1,r=e.xn+1,c=e.yn+1;for(;;){if(n>=4)return!0;if((s<0||o<0)&&(r>14||c>14))return!1;const e=""+o+s,a=""+r+c;s>=0&&o>=0&&i.hasOwnProperty(e)&&i[e].color===t?(n+=1,o-=1,s-=1):o=-9999,r<=14&&c<=14&&i.hasOwnProperty(a)&&i[a].color===t?(n+=1,r+=1,c+=1):r=9999}},createPieces(e,t){a.createPieces(e,t)},backPieces(){const e=r.length;if(0===e)return;const t=r.splice(e-1,1)[0];delete i[t.id],c.push(t),a.backPieces(t,r),this.someOneWin=!1,this.showText(r.length%2==0?"white":"black")},reBackPieces(){const e=c.length;if(0===e)return;const t=c.splice(e-1,1)[0];this.savePieces(t.position)},reset(){r=[],i={},c=[],this.showText("white"),a.reset()},boxReset(){const e=document.querySelector(".event-box").cloneNode();this.gameBox.innerHTML="",this.gameBox.appendChild(e)}}).start()},5:function(e,t){}});